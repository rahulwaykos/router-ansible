---
- name: Getting started
  hosts: all
  gather_facts: no

  tasks:
  - name: GATHERING FACTS
    ios_facts:
      gather_subset: hardware
    when: inventory_hostname in groups['iosxe']

  - name: Update login banner For Cisco
    ios_banner:
      banner: login
      text: |
        -----------------------------------------------------------------
          ____ ___ ____   ____ ___    ____             _
         / ___|_ _/ ___| / ___/ _ \  |  _ \ ___  _   _| |_ ___ _ __
        | |    | |\___ \| |  | | | | | |_) / _ \| | | | __/ _ \ '__|
        | |___ | | ___) | |__| |_| | |  _ < (_) | |_| | ||  __/ |
         \____|___|____/ \____\___/  |_| \_\___/ \__,_|\__\___|_|
        ------------------------------------------------------------------
                  This Banner is generated by ansible
        ------------------------------------------------------------------
      state: present
    when: inventory_hostname in groups['iosxe']

  - name: Update login banner for Mikrotik
    routeros_command:
      commands:
        - /system note set show-at-login=yes
        - >
          /system note set note="\
          \n----------------------------------------------\
          \n __  __ _ _            _____ _ _              \
          \n|  \/  (_) | ___ __ __|_   _(_) | __          \
          \n| |\/| | | |/ / '__/ _ \| | | | |/ /          \
          \n| |  | | |   <| | | (_) | | | |   <           \
          \n|_|  |_|_|_|\_\_|  \___/|_| |_|_|\_\          \
          \n                                              \
          \n----------------------------------------------\
          \n       This is generated by Ansible \
          \n----------------------------------------------"

    when: inventory_hostname in groups['routeros']
  
  - name: Creating loopback for Cisco
    ios_interface:
      name: Loopback181
      enabled: True
      description: Loopback interface 181 created with Ansible
    when: inventory_hostname in groups['iosxe']
  - name: Assign IP to loopback
    ios_l3_interface:
      name: Loopback181
      ipv4: 10.10.10.181/32
    when: inventory_hostname in groups['iosxe']
  - name: Run IOS commands
    ios_command:
      commands: 
        - show ip interface brief
    when: inventory_hostname in groups['iosxe']
    register: output
  - name: Display IOS command output
    debug:
      var: output["stdout_lines"]
    when: inventory_hostname in groups['iosxe']
